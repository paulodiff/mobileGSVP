"use strict";angular.module("myApp.services",[]).service("rService",[function(){this.time_diff=function(t,e){var i=e-t,n=i,r=Math.floor(n/1e3/60/60);n-=1e3*r*60*60;var o=Math.floor(n/1e3/60);n-=1e3*o*60;var u=Math.floor(n/1e3);return n-=1e3*u,(r+":"+o).toString()}}]).service("version",[function(){return"0.0.1"}]).factory("AuthService",["API_PROVIDER_URL","$http","Session","$rootScope",function(t,e,i,n){return{login:function(t){return e.post(n.base_url+"/api2/login",t).then(function(t){i.create(t.data[0].id_utenti,t.data[0].nome_breve_utenti,t.data[0].token,t.data[0].isadmin_utenti)})},logout:function(t){return e.post(n.base_url+"/api2/logout",t).then(function(){i.destroy()})},isAuthenticated:function(){return!!i.id_utenti},isAuthorized:function(t){return angular.isArray(t)||(t=[t]),this.isAuthenticated()&&-1!==t.indexOf(i.userRole)}}}]).service("Session",function(){return this.create=function(t,e,i,n){this.id_utenti=t,this.nome_breve_utenti=e,this.token=i,this.isAdmin=n},this.destroy=function(){this.id_utenti=null,this.nome_breve_utenti=null,this.token=null,this.isAdmin=!1},this});