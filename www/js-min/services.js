"use strict";angular.module("myApp.services",[]).service("rService",[function(){this.time_diff=function(t,e){var n=e-t,i=n,o=Math.floor(i/1e3/60/60);i-=1e3*o*60*60;var r=Math.floor(i/1e3/60);i-=1e3*r*60;var s=Math.floor(i/1e3);return i-=1e3*s,(o+":"+r).toString()}}]).service("version",[function(){return"0.0.1"}]).service("modalService",["$modal",function(t){var e={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"partials/modal.html"},n={type:2,closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(t,e){return t||(t={}),t.backdrop="static",this.show(t,e)},this.show=function(i,o){var r={},s={};return angular.extend(r,e,i),angular.extend(s,n,o),r.controller||(r.controller=function(t,e){t.modalOptions=s,t.modalOptions.ok=function(t){e.close(t)},t.modalOptions.close=function(){e.dismiss("cancel")}}),t.open(r).result}}]).service("Phone",["$resource",function(t){return t("/apiQ/utentiAll",{},{query:{method:"GET",params:{phoneId:"phones"},isArray:!0}})}]).factory("AuthService",["API_PROVIDER_URL","$http","Session",function(t,e,n){return{login:function(t){return e.post("/api2/login",t).then(function(t){n.create(t.data[0].id_utenti,t.data[0].nome_breve_utenti,t.data[0].token,t.data[0].isadmin_utenti)})},logout:function(t){return e.post("/api2/logout",t).then(function(){n.destroy()})},isAuthenticated:function(){return!!n.id_utenti},isAuthorized:function(t){return angular.isArray(t)||(t=[t]),this.isAuthenticated()&&-1!==t.indexOf(n.userRole)}}}]).service("Session",function(){return this.create=function(t,e,n,i){this.id_utenti=t,this.nome_breve_utenti=e,this.token=n,this.isAdmin=i},this.destroy=function(){this.id_utenti=null,this.nome_breve_utenti=null,this.token=null,this.isAdmin=!1},this});