"use strict";angular.module("myApp.controllers").controller("AppCtrl",["$scope","USER_ROLES","AUTH_EVENTS","$rootScope","AuthService","modalService","Session","Restangular","$state","$ionicPopup","$ionicSideMenuDelegate",function(e,t,o,n,i,c,u,r,a,s,l){e.currentUser=null,e.userRoles=t,e.isAuthorized=i.isAuthorized,e.go=function(e){a.go(e)},window.ionic,e.toggleLeft=function(){l.toggleLeft(e.$$childHead)},n.$on(o.loginSuccess,function(){e.currentUser=u.nome_breve_utenti,r.setDefaultRequestParams({apiKey:u.token}),a.go("menu.list")}),n.$on(o.logoutSuccess,function(){e.currentUser="",r.setDefaultRequestParams({apiKey:""}),a.go("menu.home")}),n.$on(o.loginFailed,function(){var e=s.alert({title:"Login errato",template:"Immettere nome utente e password corrette"});e.then(function(){a.go("menu.home")})}),n.$on(o.notAuthenticated,function(){e.currentUser=u.nome_breve_utenti;var t=s.alert({title:"Utente non autenticato",template:"Immettere nome utente e password"});t.then(function(){a.go("menu.home")})}),n.$on("$stateChangeStart",function(e,t){t.accessLogged&&(i.isAuthenticated()||(e.preventDefault(),n.$broadcast(o.notAuthenticated)))})}]).controller("LoginController",["$scope","$rootScope","AUTH_EVENTS","AuthService",function(e,t,o,n){e.credentials={username:"",password:""},e.leftButtons=[{type:"button-icon button-clear ion-navicon",tap:function(){$ionicSideMenuDelegate.toggleLeft(e.$$childHead)}}],e.navTitle='<span class="item-calm"><b>Gestione Volontari</b></span>',e.login=function(e){n.login(e).then(function(){t.$broadcast(o.loginSuccess)},function(){t.$broadcast(o.loginFailed)})},e.logout=function(e){n.logout(e).then(function(){t.$broadcast(o.logoutSuccess)},function(){t.$broadcast(o.logoutSuccess)})}}]).controller("AboutController",["$scope","$rootScope","AUTH_EVENTS","AuthService","Session",function(e,t,o,n,i){e.navTitle=i.nome_breve_utenti}]);